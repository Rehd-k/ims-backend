'use strict';var a60_0x3b8e7c=a60_0x40e9;(function(_0x53b72f,_0x4a5ceb){var _0x5b9a03=a60_0x40e9,_0x2b56e4=_0x53b72f();while(!![]){try{var _0x413ce3=-parseInt(_0x5b9a03(0x1d5))/0x1*(parseInt(_0x5b9a03(0x1cb))/0x2)+parseInt(_0x5b9a03(0x1ca))/0x3+parseInt(_0x5b9a03(0x1d7))/0x4+parseInt(_0x5b9a03(0x1d8))/0x5+parseInt(_0x5b9a03(0x1c9))/0x6*(-parseInt(_0x5b9a03(0x1e2))/0x7)+parseInt(_0x5b9a03(0x1de))/0x8+parseInt(_0x5b9a03(0x1e3))/0x9*(parseInt(_0x5b9a03(0x1ce))/0xa);if(_0x413ce3===_0x4a5ceb)break;else _0x2b56e4['push'](_0x2b56e4['shift']());}catch(_0x539852){_0x2b56e4['push'](_0x2b56e4['shift']());}}}(a60_0x1858,0xa0090));function a60_0x1858(){var _0x19c233=['Model','__decorate','7cIGdkm','2920059asYWjh','InjectModel','sort','@nestjs/common','decorate','__metadata','ywAyU','1169466MchqaH','421446ASospa','1474082iplQMI','metadata','Notification','10BRluGU','object','getNotifications','notificationModel','defineProperty','length','function','1NunetF','name','914372kvsizF','790245dZDRXi','etxyr','__param','Injectable','design:paramtypes','MkHxX','5887048WPDzWw','@nestjs/mongoose'];a60_0x1858=function(){return _0x19c233;};return a60_0x1858();}function a60_0x40e9(_0x88550b,_0x349f27){var _0x1858bf=a60_0x1858();return a60_0x40e9=function(_0x40e9cd,_0x4b44d8){_0x40e9cd=_0x40e9cd-0x1c8;var _0x9ab12a=_0x1858bf[_0x40e9cd];return _0x9ab12a;},a60_0x40e9(_0x88550b,_0x349f27);}var __decorate=this&&this[a60_0x3b8e7c(0x1e1)]||function(_0x3f0ad5,_0x5807b9,_0x5d655d,_0x3df3e9){var _0x24de11=a60_0x3b8e7c,_0x241f33={'ScJXH':_0x24de11(0x1cf),'etxyr':function(_0x576252,_0x49b0f1,_0x43e902,_0x196d70){return _0x576252(_0x49b0f1,_0x43e902,_0x196d70);}},_0x25dee6=arguments[_0x24de11(0x1d3)],_0x25b923=_0x25dee6<0x3?_0x5807b9:_0x3df3e9===null?_0x3df3e9=Object['getOwnPropertyDescriptor'](_0x5807b9,_0x5d655d):_0x3df3e9,_0x37b1b5;if(typeof Reflect===_0x241f33['ScJXH']&&typeof Reflect[_0x24de11(0x1e7)]==='function')_0x25b923=Reflect['decorate'](_0x3f0ad5,_0x5807b9,_0x5d655d,_0x3df3e9);else{for(var _0x34f15b=_0x3f0ad5['length']-0x1;_0x34f15b>=0x0;_0x34f15b--)if(_0x37b1b5=_0x3f0ad5[_0x34f15b])_0x25b923=(_0x25dee6<0x3?_0x37b1b5(_0x25b923):_0x25dee6>0x3?_0x241f33[_0x24de11(0x1d9)](_0x37b1b5,_0x5807b9,_0x5d655d,_0x25b923):_0x37b1b5(_0x5807b9,_0x5d655d))||_0x25b923;}return _0x25dee6>0x3&&_0x25b923&&Object[_0x24de11(0x1d2)](_0x5807b9,_0x5d655d,_0x25b923),_0x25b923;},__metadata=this&&this[a60_0x3b8e7c(0x1e8)]||function(_0x3800cb,_0x58acaf){var _0x3bcfa6=a60_0x3b8e7c,_0x42189b={'qFuVc':function(_0x4fa056,_0x51ff39){return _0x4fa056===_0x51ff39;},'ywAyU':'object','MkHxX':function(_0x1629b1,_0x471fc0){return _0x1629b1===_0x471fc0;},'RctTT':_0x3bcfa6(0x1d4)};if(_0x42189b['qFuVc'](typeof Reflect,_0x42189b[_0x3bcfa6(0x1c8)])&&_0x42189b[_0x3bcfa6(0x1dd)](typeof Reflect[_0x3bcfa6(0x1cc)],_0x42189b['RctTT']))return Reflect['metadata'](_0x3800cb,_0x58acaf);},__param=this&&this[a60_0x3b8e7c(0x1da)]||function(_0xe09038,_0x43ca95){var _0x26aa0e={'zpLRc':function(_0x311b8d,_0x105bd5,_0x1527a3,_0x3b113a){return _0x311b8d(_0x105bd5,_0x1527a3,_0x3b113a);}};return function(_0x1a81e3,_0x2dbfd5){_0x26aa0e['zpLRc'](_0x43ca95,_0x1a81e3,_0x2dbfd5,_0xe09038);};};Object[a60_0x3b8e7c(0x1d2)](exports,'__esModule',{'value':!![]}),exports['NotificationsService']=void 0x0;const common_1=require(a60_0x3b8e7c(0x1e6)),mongoose_1=require(a60_0x3b8e7c(0x1df)),mongoose_2=require('mongoose'),notification_schema_1=require('./notification.schema');let NotificationsService=class NotificationsService{constructor(_0x53d25f){this['notificationModel']=_0x53d25f;}async['createNotification'](_0x4ab846,_0x53cbd4,_0x120c99,_0x29b590){const _0x156980=new this['notificationModel']({'type':_0x4ab846,'message':_0x53cbd4,'recipients':_0x120c99,'location':_0x29b590['user']['location']});return await _0x156980['save']();}async[a60_0x3b8e7c(0x1d0)](_0x2820de,_0x30f052){var _0x1b32a3=a60_0x3b8e7c;return await this['notificationModel']['find']({'recipients':_0x2820de,'location':_0x30f052})[_0x1b32a3(0x1e5)]({'createdAt':-0x1});}async['markAsRead'](_0x3f0e91){var _0x37d18e=a60_0x3b8e7c;return await this[_0x37d18e(0x1d1)]['findByIdAndUpdate'](_0x3f0e91,{'isRead':!![]});}};exports['NotificationsService']=NotificationsService,exports['NotificationsService']=NotificationsService=__decorate([(0x0,common_1[a60_0x3b8e7c(0x1db)])(),__param(0x0,(0x0,mongoose_1[a60_0x3b8e7c(0x1e4)])(notification_schema_1[a60_0x3b8e7c(0x1cd)][a60_0x3b8e7c(0x1d6)])),__metadata(a60_0x3b8e7c(0x1dc),[mongoose_2[a60_0x3b8e7c(0x1e0)]])],NotificationsService);