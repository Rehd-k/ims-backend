'use strict';const a60_0x58655a=a60_0x4db5;(function(_0x2f2393,_0x449b0e){const _0x28f394=a60_0x4db5,_0x427700=_0x2f2393();while(!![]){try{const _0x40e2f7=parseInt(_0x28f394(0x1c9))/0x1+-parseInt(_0x28f394(0x1d9))/0x2+-parseInt(_0x28f394(0x1e1))/0x3*(parseInt(_0x28f394(0x1dc))/0x4)+parseInt(_0x28f394(0x1ce))/0x5*(-parseInt(_0x28f394(0x1c0))/0x6)+parseInt(_0x28f394(0x1ed))/0x7+-parseInt(_0x28f394(0x1d6))/0x8*(parseInt(_0x28f394(0x1d0))/0x9)+-parseInt(_0x28f394(0x1ec))/0xa*(-parseInt(_0x28f394(0x1e7))/0xb);if(_0x40e2f7===_0x449b0e)break;else _0x427700['push'](_0x427700['shift']());}catch(_0x7193a6){_0x427700['push'](_0x427700['shift']());}}}(a60_0x4597,0x4f9df));function a60_0x4db5(_0x3e83a5,_0x594215){const _0x459745=a60_0x4597();return a60_0x4db5=function(_0x4db51b,_0x56ce87){_0x4db51b=_0x4db51b-0x1bd;let _0x417778=_0x459745[_0x4db51b];return _0x417778;},a60_0x4db5(_0x3e83a5,_0x594215);}var __decorate=this&&this[a60_0x58655a(0x1f1)]||function(_0x5729d0,_0x41c9d9,_0x5c47ba,_0x93511e){const _0x4654fc=a60_0x58655a;var _0xca4e9e=arguments['length'],_0x3a6ef1=_0xca4e9e<0x3?_0x41c9d9:_0x93511e===null?_0x93511e=Object['getOwnPropertyDescriptor'](_0x41c9d9,_0x5c47ba):_0x93511e,_0x3ea661;if(typeof Reflect===_0x4654fc(0x1d2)&&typeof Reflect['decorate']===_0x4654fc(0x1d4))_0x3a6ef1=Reflect['decorate'](_0x5729d0,_0x41c9d9,_0x5c47ba,_0x93511e);else{for(var _0x32691d=_0x5729d0[_0x4654fc(0x1bd)]-0x1;_0x32691d>=0x0;_0x32691d--)if(_0x3ea661=_0x5729d0[_0x32691d])_0x3a6ef1=(_0xca4e9e<0x3?_0x3ea661(_0x3a6ef1):_0xca4e9e>0x3?_0x3ea661(_0x41c9d9,_0x5c47ba,_0x3a6ef1):_0x3ea661(_0x41c9d9,_0x5c47ba))||_0x3a6ef1;}return _0xca4e9e>0x3&&_0x3a6ef1&&Object['defineProperty'](_0x41c9d9,_0x5c47ba,_0x3a6ef1),_0x3a6ef1;},__metadata=this&&this['__metadata']||function(_0x2a545e,_0x1a0d6c){const _0x56bceb=a60_0x58655a;if(typeof Reflect===_0x56bceb(0x1d2)&&typeof Reflect[_0x56bceb(0x1e4)]===_0x56bceb(0x1d4))return Reflect['metadata'](_0x2a545e,_0x1a0d6c);},__param=this&&this[a60_0x58655a(0x1f0)]||function(_0x446378,_0x2be4b8){return function(_0x4f949f,_0x2d7f72){_0x2be4b8(_0x4f949f,_0x2d7f72,_0x446378);};};Object['defineProperty'](exports,a60_0x58655a(0x1c5),{'value':!![]}),exports[a60_0x58655a(0x1d3)]=void 0x0;const common_1=require('@nestjs/common'),mongoose_1=require(a60_0x58655a(0x1d7)),mongoose_2=require('mongoose'),notifications_service_1=require(a60_0x58655a(0x1c4)),purchases_service_1=require(a60_0x58655a(0x1d5)),sales_service_1=require(a60_0x58655a(0x1ea));function a60_0x4597(){const _0x5f24a7=['object','InventoryService','function','../purchases/purchases.service','2807152rkedLo','@nestjs/mongoose','Insufficient\x20stock','154972fQDoWu','createNotification','notificationService','6128POlaLn','Model','deductFromSold','Admin','name','321MpArUn','getDashboardData','PurchasesService','metadata','roq','deductStock','22tkgxBa','InjectModel','Somthings\x20Not\x20Right','../sales/sales.service','SalesService','5324830ywCBDz','589925cthBTW','addToSold','purchasesService','__param','__decorate','design:paramtypes','LowStock','length','findById','\x20is\x20running\x20low\x20on\x20stock.','18shpHri','productModel','restockProduct','Product\x20not\x20found','../notifications/notifications.service','__esModule','Product','notifyAdminLowStock','save','243843CdzImZ','BadRequestException','NotificationsService','quantity','sold','791115ygnaWG','forwardRef','9xyksoU','Product\x20'];a60_0x4597=function(){return _0x5f24a7;};return a60_0x4597();}let InventoryService=class InventoryService{constructor(_0x25f72d,_0x37d192,_0xc05be6,_0x4be2d1){const _0xe84732=a60_0x58655a;this[_0xe84732(0x1c1)]=_0x25f72d,this[_0xe84732(0x1db)]=_0x37d192,this['purchasesService']=_0xc05be6,this['saleService']=_0x4be2d1;}async[a60_0x58655a(0x1c2)](_0x3e6552,_0x29b218){const _0x3e3748=a60_0x58655a,_0x2104e7=await this[_0x3e3748(0x1c1)]['findById'](_0x3e6552);if(!_0x2104e7)throw new common_1[(_0x3e3748(0x1ca))](_0x3e3748(0x1c3));return _0x2104e7[_0x3e3748(0x1cc)]+=_0x29b218,await _0x2104e7[_0x3e3748(0x1c8)]();}async[a60_0x58655a(0x1ee)](_0x17a2ab,_0x206d55){const _0x3c32c8=a60_0x58655a,_0x132945=await this[_0x3c32c8(0x1c1)][_0x3c32c8(0x1be)](_0x17a2ab);if(!_0x132945)throw new common_1[(_0x3c32c8(0x1ca))](_0x3c32c8(0x1c3));_0x132945[_0x3c32c8(0x1cd)]+=_0x206d55,await _0x132945['save']();}async[a60_0x58655a(0x1de)](_0x515921,_0x817911){const _0x23b5da=a60_0x58655a,_0x109b38=await this[_0x23b5da(0x1c1)][_0x23b5da(0x1be)](_0x515921);if(!_0x109b38)throw new common_1[(_0x23b5da(0x1ca))]('Product\x20not\x20found');if(_0x109b38[_0x23b5da(0x1cd)]<_0x817911)throw new common_1[(_0x23b5da(0x1ca))](_0x23b5da(0x1e9));_0x109b38[_0x23b5da(0x1cd)]-=_0x817911,await _0x109b38[_0x23b5da(0x1c8)]();}async[a60_0x58655a(0x1e6)](_0x133791,_0x5178ed,_0x1c44fa){const _0x57aa33=a60_0x58655a,_0x3225fb=await this[_0x57aa33(0x1c1)][_0x57aa33(0x1be)](_0x133791);if(!_0x3225fb)throw new common_1[(_0x57aa33(0x1ca))](_0x57aa33(0x1c3));if(_0x3225fb[_0x57aa33(0x1cc)]<_0x5178ed)throw new common_1[(_0x57aa33(0x1ca))](_0x57aa33(0x1d8));return _0x3225fb['quantity']-=_0x5178ed,_0x3225fb[_0x57aa33(0x1cc)]<=_0x3225fb[_0x57aa33(0x1e5)]&&await this[_0x57aa33(0x1c7)](_0x3225fb,_0x1c44fa),_0x3225fb['save']();}async[a60_0x58655a(0x1c7)](_0x747eec,_0x51eb4d){const _0x4b49da=a60_0x58655a;this[_0x4b49da(0x1db)][_0x4b49da(0x1da)](_0x4b49da(0x1f3),_0x4b49da(0x1d1)+_0x747eec[_0x4b49da(0x1e0)]+_0x4b49da(0x1bf),[_0x4b49da(0x1df)],_0x51eb4d);}async['getDashboardData'](_0x17fa4a,_0x52eb7b,_0x27f34b,_0xd42460){const _0x45a1b9=a60_0x58655a;try{const _0x31a94e=await this[_0x45a1b9(0x1ef)][_0x45a1b9(0x1e2)](_0x17fa4a);return _0x31a94e[0x0];}catch(_0xc91e13){return new common_1['InternalServerErrorException'](_0xc91e13);}}async['h'](_0x173a92){}};exports[a60_0x58655a(0x1d3)]=InventoryService,exports['InventoryService']=InventoryService=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,mongoose_1[a60_0x58655a(0x1e8)])(a60_0x58655a(0x1c6))),__param(0x2,(0x0,common_1['Inject'])((0x0,common_1[a60_0x58655a(0x1cf)])(()=>purchases_service_1[a60_0x58655a(0x1e3)]))),__param(0x3,(0x0,common_1['Inject'])((0x0,common_1[a60_0x58655a(0x1cf)])(()=>sales_service_1['SalesService']))),__metadata(a60_0x58655a(0x1f2),[mongoose_2[a60_0x58655a(0x1dd)],notifications_service_1[a60_0x58655a(0x1cb)],purchases_service_1[a60_0x58655a(0x1e3)],sales_service_1[a60_0x58655a(0x1eb)]])],InventoryService);