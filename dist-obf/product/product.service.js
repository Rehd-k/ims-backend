'use strict';const a64_0x432416=a64_0x2b67;function a64_0x3782(){const _0x123ebf=['../do_logger','productModel','title','Model','decreaseAmount','85IAQBVu','log','Error\x20updating\x20products\x20','209997nRWlbx','__metadata','ERROR','remove','Error\x20createing\x20objects\x20','countDocuments','Error\x20in\x20findAll\x20Products:','16634gZHjqT','sort','1283139sfaITT','user','skip','$regex','5tDJtLu','exec','925326AXFKkO','select','__param','find','save','quantity','BadRequestException','Error\x20removing\x20product\x20','increaseAmount','10gkSjqW','28OgoRwh','metadata','create','design:paramtypes','findAll','barcode','8748bAmQFg','location','limit','Injectable','ProductService','function','findByIdAndDelete','parse','__decorate','initiator','Error\x20decreasing\x20amount\x20','7766528IOQZae','Product','./product.schema','name','update','length','484360vcFkLF','InternalServerErrorException','object','@nestjs/common','decorate','defineProperty','findById'];a64_0x3782=function(){return _0x123ebf;};return a64_0x3782();}(function(_0x58ea2e,_0x35f8fa){const _0x56a91b=a64_0x2b67,_0x5da10b=_0x58ea2e();while(!![]){try{const _0x3a926a=-parseInt(_0x56a91b(0x175))/0x1*(-parseInt(_0x56a91b(0x16f))/0x2)+parseInt(_0x56a91b(0x171))/0x3+parseInt(_0x56a91b(0x148))/0x4*(parseInt(_0x56a91b(0x165))/0x5)+-parseInt(_0x56a91b(0x177))/0x6*(-parseInt(_0x56a91b(0x181))/0x7)+-parseInt(_0x56a91b(0x159))/0x8+-parseInt(_0x56a91b(0x168))/0x9*(-parseInt(_0x56a91b(0x180))/0xa)+-parseInt(_0x56a91b(0x153))/0xb;if(_0x3a926a===_0x35f8fa)break;else _0x5da10b['push'](_0x5da10b['shift']());}catch(_0x4d8e12){_0x5da10b['push'](_0x5da10b['shift']());}}}(a64_0x3782,0x5ccc5));function a64_0x2b67(_0x505450,_0x337a59){const _0x3782c9=a64_0x3782();return a64_0x2b67=function(_0x2b6766,_0x24b36d){_0x2b6766=_0x2b6766-0x144;let _0x158a9a=_0x3782c9[_0x2b6766];return _0x158a9a;},a64_0x2b67(_0x505450,_0x337a59);}var __decorate=this&&this[a64_0x432416(0x150)]||function(_0x173e3f,_0x56e220,_0x3bb53e,_0x1e6449){const _0x13ca69=a64_0x432416;var _0x25d386=arguments[_0x13ca69(0x158)],_0x61566d=_0x25d386<0x3?_0x56e220:_0x1e6449===null?_0x1e6449=Object['getOwnPropertyDescriptor'](_0x56e220,_0x3bb53e):_0x1e6449,_0x57fd5a;if(typeof Reflect===_0x13ca69(0x15b)&&typeof Reflect[_0x13ca69(0x15d)]==='function')_0x61566d=Reflect[_0x13ca69(0x15d)](_0x173e3f,_0x56e220,_0x3bb53e,_0x1e6449);else{for(var _0x1a73bd=_0x173e3f['length']-0x1;_0x1a73bd>=0x0;_0x1a73bd--)if(_0x57fd5a=_0x173e3f[_0x1a73bd])_0x61566d=(_0x25d386<0x3?_0x57fd5a(_0x61566d):_0x25d386>0x3?_0x57fd5a(_0x56e220,_0x3bb53e,_0x61566d):_0x57fd5a(_0x56e220,_0x3bb53e))||_0x61566d;}return _0x25d386>0x3&&_0x61566d&&Object[_0x13ca69(0x15e)](_0x56e220,_0x3bb53e,_0x61566d),_0x61566d;},__metadata=this&&this[a64_0x432416(0x169)]||function(_0x140739,_0x118f65){const _0x585d8e=a64_0x432416;if(typeof Reflect==='object'&&typeof Reflect[_0x585d8e(0x182)]===_0x585d8e(0x14d))return Reflect[_0x585d8e(0x182)](_0x140739,_0x118f65);},__param=this&&this[a64_0x432416(0x179)]||function(_0x13ac7c,_0x3e706f){return function(_0x273692,_0x676201){_0x3e706f(_0x273692,_0x676201,_0x13ac7c);};};Object[a64_0x432416(0x15e)](exports,'__esModule',{'value':!![]}),exports[a64_0x432416(0x14c)]=void 0x0;const common_1=require(a64_0x432416(0x15c)),mongoose_1=require('@nestjs/mongoose'),mongoose_2=require('mongoose'),product_schema_1=require(a64_0x432416(0x155)),do_logger_1=require(a64_0x432416(0x160));let ProductService=class ProductService{constructor(_0x1aefcd){this['productModel']=_0x1aefcd;}async[a64_0x432416(0x144)](_0x3870ab,_0x3f90fe){const _0x32550b=a64_0x432416;try{_0x3870ab['location']=_0x3f90fe[_0x32550b(0x172)][_0x32550b(0x149)],_0x3870ab[_0x32550b(0x162)]=_0x3870ab[_0x32550b(0x162)]['toLowerCase'](),_0x3870ab[_0x32550b(0x151)]=_0x3f90fe['user']['username'];const _0x3edcb3=new this[(_0x32550b(0x161))](_0x3870ab);return await _0x3edcb3[_0x32550b(0x17b)]();}catch(_0x5106b0){(0x0,do_logger_1[_0x32550b(0x166)])(_0x32550b(0x16c)+_0x5106b0,'ERROR');throw new common_1['BadRequestException'](_0x5106b0);}}async[a64_0x432416(0x146)](_0x28b11b,_0x4aaef3){const _0x22300e=a64_0x432416,{filter:filter='{}',sort:sort='{}',limit:limit=0xa,skip:skip=0x0,select:select=''}=_0x28b11b,_0x588e09=JSON[_0x22300e(0x14f)](filter),_0x47baf6=JSON[_0x22300e(0x14f)](sort);if(_0x588e09&&typeof _0x588e09==='object'&&_0x22300e(0x147)in _0x588e09){_0x28b11b[_0x22300e(0x173)]=0x0;if(_0x588e09[_0x22300e(0x147)][_0x22300e(0x174)])_0x588e09['barcode'][_0x22300e(0x174)]=_0x588e09[_0x22300e(0x147)][_0x22300e(0x174)]['toUpperCase']();}try{const _0x5b104a=await this[_0x22300e(0x161)][_0x22300e(0x17a)]({..._0x588e09,'location':_0x4aaef3['user'][_0x22300e(0x149)]})[_0x22300e(0x170)](_0x47baf6)[_0x22300e(0x173)](Number(skip))[_0x22300e(0x14a)](Number(limit))[_0x22300e(0x178)](select)[_0x22300e(0x176)](),_0x3569b8=await this[_0x22300e(0x161)][_0x22300e(0x16d)]({..._0x588e09,'location':_0x4aaef3['user'][_0x22300e(0x149)]})[_0x22300e(0x176)]();return{'products':_0x5b104a,'totalDocuments':_0x3569b8};}catch(_0x2598cc){(0x0,do_logger_1[_0x22300e(0x166)])(_0x22300e(0x16e),_0x2598cc);throw new common_1[(_0x22300e(0x15a))](_0x2598cc);}}async['findOne'](_0x403f06){const _0x58e5d8=a64_0x432416;try{return await this[_0x58e5d8(0x161)][_0x58e5d8(0x15f)](_0x403f06)['exec']();}catch(_0x120260){(0x0,do_logger_1['log'])('Error\x20finding\x20products\x20'+_0x120260,_0x58e5d8(0x16a));throw new common_1[(_0x58e5d8(0x17d))](_0x120260);}}async[a64_0x432416(0x157)](_0x17aee5,_0x479ad2){const _0x1966c3=a64_0x432416;try{return await this[_0x1966c3(0x161)]['findByIdAndUpdate'](_0x17aee5,_0x479ad2)['exec']();}catch(_0x6507f3){(0x0,do_logger_1[_0x1966c3(0x166)])(_0x1966c3(0x167)+_0x6507f3,'ERROR');throw new common_1[(_0x1966c3(0x17d))](_0x6507f3);}}async[a64_0x432416(0x17f)](_0x3c1274,_0x511789){const _0x32e857=a64_0x432416;try{const _0x115b31=await this[_0x32e857(0x161)][_0x32e857(0x15f)](_0x3c1274)[_0x32e857(0x176)]();let _0x4fc39e=_0x115b31['quantity'],_0x5b1302=_0x4fc39e+_0x511789;return _0x115b31[_0x32e857(0x17c)]=_0x5b1302,await _0x115b31['save']();}catch(_0x470b94){(0x0,do_logger_1['log'])('Error\x20increacing\x20amount\x20'+_0x470b94,_0x32e857(0x16a));throw new common_1['BadRequestException'](_0x470b94);}}async[a64_0x432416(0x164)](_0x2e5a16,_0x212fe0){const _0x246a38=a64_0x432416;try{const _0xd0332e=await this[_0x246a38(0x161)][_0x246a38(0x15f)](_0x2e5a16)[_0x246a38(0x176)]();return _0xd0332e[_0x246a38(0x17c)]-=_0x212fe0,await _0xd0332e[_0x246a38(0x17b)]();}catch(_0x4dfc96){(0x0,do_logger_1[_0x246a38(0x166)])(_0x246a38(0x152)+_0x4dfc96,_0x246a38(0x16a));throw new common_1['BadRequestException'](_0x4dfc96);}}async[a64_0x432416(0x16b)](_0x243e1a){const _0x5bde91=a64_0x432416;try{return await this[_0x5bde91(0x161)][_0x5bde91(0x14e)](_0x243e1a)[_0x5bde91(0x176)]();}catch(_0x3881a3){(0x0,do_logger_1[_0x5bde91(0x166)])(_0x5bde91(0x17e)+_0x3881a3,_0x5bde91(0x16a));throw new common_1[(_0x5bde91(0x17d))](_0x3881a3);}}};exports['ProductService']=ProductService,exports['ProductService']=ProductService=__decorate([(0x0,common_1[a64_0x432416(0x14b)])(),__param(0x0,(0x0,mongoose_1['InjectModel'])(product_schema_1[a64_0x432416(0x154)][a64_0x432416(0x156)])),__metadata(a64_0x432416(0x145),[mongoose_2[a64_0x432416(0x163)]])],ProductService);